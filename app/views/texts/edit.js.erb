$("#unique").remove();
$("#edit_modal").append("<%= escape_javascript(render :partial => 'texts/edit') %>");
$("#edit_modal").modal("show");

$("#text_visibility").bootstrapSwitch({size: 'mini'});

$('#text_content_text').keyup(function(){
 var element = document.getElementById('text_word_count');
 var len = document.getElementById('text_content_text').value.length;
 element.textContent = len;

  var max_characters = <%= @work.characters_per_line %>;
  console.log(max_characters);
  var cs = $(this).val().length;
    if(len > max_characters){
      $('#text_word_count').addClass('above_limit');
    }
    else{
      $('#text_word_count').removeClass('above_limit');
    }

});



//***********************************************
//used for bolding selected lines in the editorview
//***********************************************
$('#boldIt').click(function(){
  var textComponent = document.getElementById('text_content_text');
  var selectedText;
  // IE version
  if (document.selection != undefined){
    console.log('not ie')
    textComponent.focus();
    var sel = document.selection.createRange();
    selectedText = sel.text;
  }
  // Mozilla version
  else if (textComponent.selectionStart != undefined){
    var startPos = textComponent.selectionStart;
    var endPos = textComponent.selectionEnd;
    selectedText = textComponent.value.substring(startPos, endPos)
  }
  //bolds the text that is highlighted in the textarea
  $('textarea#text_content_text').val(
  $('textarea#text_content_text').val().substring(0, textComponent.selectionStart)
    + selectedText.toUpperCase()
    + $('textarea#text_content_text').val().substring(textComponent.selectionEnd)
  );
});

//***********************************************
//changes the database visible value for element
//***********************************************
$('.visi').click(function(){
  $vis = $(this);
  $.ajax('/texts/toggleVis',
  {
    data:{
      id: $vis.attr('data-id')
    },
    method: 'POST',
    success:(function(d){
      //console.log('success');
      //console.log(d);
      if($vis.hasClass("glyphicon-eye-open")) {
        $vis.removeClass("glyphicon-eye-open");
        $vis.addClass("glyphicon-eye-close");
      }
      else {
        $vis.removeClass("glyphicon-eye-close");
        $vis.addClass("glyphicon-eye-open");
      }
    }),
    error:(function(e){
      //console.log(e);
      //console.log('error');
      //console.log('i got nothing');
    })
  });
});
